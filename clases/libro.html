<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="Description" content="Enter your description here" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
  <title>Clase libro</title>
</head>

<body>

  <h2 class="m-3"><span class="text-danger">Clase libro</span></h2>
  <ol class="m-2">
    <li>Crear una clase llamada Libro</li>
    <li>La clase Libro tendrá: titulo, autor, año y género.</li>
    <li>Crear un método que devuelva toda la información del libro.</li>
    <li>Pedir 3 libros y guardarlos en un array.</li>
    <li>Los libros se introducen al arrancar el programa, pidiendo los datos con prompt.</li>
    <li>Validar que los campos no se introduzcan vacíos.</li>
    <li>Validar que el año sea un numero y tenga 4 dígitos.</li>
    <li>Validar que el genero sea: aventuras, terror o fantasía.</li>
    <li>Crear una funcion que muestre todos los libros</li>
    <li>Crear una funcion que muestre todos los autores ordenados alfabeticamente.</li>
    <li>Crear una funcion que pida un género y muestre la información de los libros que pertenezcan a ese género usando un método que devuelva la información.</li>
  </ol>
  

  <script>

    class Book {
      constructor(titulo, autor, year, genero) {
        this.titulo = titulo,
        this.autor = autor,
        this.year = year,
        this.genero = genero
      }


      // método que devuelva el autor
      getAutor() {
        return this.autor
      }      

      //  método que devuelve el género
      getGenero() {
        return this.genero
      }

      // método que devuelve toda la información del libro
      bookInfo() {
        return `${this.titulo} es un libro de ${this.genero} escrito por ${this.autor} en el año ${this.year}`
      }
    }


    // Pedir 3 libros y guardarlos en un array
    let books = []

    while (books.length < 3) {
      let titulo = prompt('Introduce el título del libro: ')
      let autor = prompt('Introduce el autor del libro: ')
      let year = prompt('Introduce el año del libro: ')
      let genero = prompt('Introduce el género del libro: ').toLowerCase()

      // Validar que los campos no se introduzcan vacíos y Validar que el año sea un numero y tenga 4 dígitos.
      if (titulo != '' 
          && autor != '' 
          && !isNaN(year) && year.length == 4 
          && (genero == 'aventura') || genero == 'terror' || genero == 'fantasia') {
          
          // Si el if se cumple se mete el elemento en el array
          // Los objetos se crean con el operador 'new'
          books.push(new Book(titulo, autor, year, genero))  
      }
    }


    // funcion que muestre todos los libros
    const showAllBooks = () => {
      console.log(books);
    }


    // funcion que muestre todos los autores ordenados alfabeticamente
    const showAutores = () => {
      let autores = []

      for (const book of books) {
        autores.push(book.getAutor())  // getAutor método creado en la clase
      }
            
      console.log(`Autores ordenados alfabeticamente: ${autores.sort()}`);  
    }


    // funcion que pida un género y muestre la información de los libros que pertenezcan a ese género
    const showGenero = () => {
      const buscarGenero = prompt('Cual es el género a buscar: ').toUpperCase()

      for (const book of books) {
        if (book.getGenero() == buscarGenero) {
          console.log(book.bookInfo());
        }
      }
    }

    // llamar funciones para ejecutarlas
    showAllBooks()  
    showAutores()
    showGenero()

  </script>

</body>
</html>
